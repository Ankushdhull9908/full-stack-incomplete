{"ast":null,"code":"import React from'react';import{useNavigate}from'react-router-dom';import{useState}from'react';import'./Form.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Form(props){const[formType,setFormType]=useState(\"LOGIN\");const[name,setName]=useState('');const[email,setEmail]=useState('');const[pass,setPass]=useState('');const navigate=useNavigate();// Function to handle form submission\nconst handleSubmit=async e=>{e.preventDefault();// Prevent default form submission behavior\nconst userData={name:formType===\"SIGNUP\"?name:undefined,email:email,password:pass};const url=formType===\"SIGNUP\"?\"http://localhost:7600/signup\":\"http://localhost:7600/login\";try{const response=await fetch(url,{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(userData)});if(response.ok){const result=await response.json();alert(\"\".concat(formType,\" successful!\"));console.log(result);localStorage.setItem(\"userdata\",JSON.stringify(result));// Redirect based on formType or handle response accordingly\nprops.setsignupbtn(\"Hello \".concat(result.user.name));navigate(\"/dashboard/:\".concat(result.user.name));}else{const errorResult=await response.json();alert(\"\".concat(formType,\" failed: \").concat(errorResult.message));}}catch(error){alert(\"\".concat(formType,\" failed: \").concat(error.message));}};return/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{children:formType}),formType===\"SIGNUP\"&&/*#__PURE__*/_jsxs(\"div\",{children:[\"NAME:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,required:true,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Email:\",/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,required:true,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Password:\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:pass,required:true,onChange:e=>setPass(e.target.value)})]}),formType===\"LOGIN\"?/*#__PURE__*/_jsx(\"p\",{children:\"Forgot Pass?\"}):null,formType===\"LOGIN\"?/*#__PURE__*/_jsx(\"p\",{onClick:()=>setFormType(\"SIGNUP\"),children:\"Don't have an Account? Sign up\"}):/*#__PURE__*/_jsx(\"p\",{onClick:()=>setFormType(\"LOGIN\"),children:\"Already have an Account? Login\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:formType}),\" \"]})});}","map":{"version":3,"names":["React","useNavigate","useState","jsx","_jsx","jsxs","_jsxs","Form","props","formType","setFormType","name","setName","email","setEmail","pass","setPass","navigate","handleSubmit","e","preventDefault","userData","undefined","password","url","response","fetch","method","headers","body","JSON","stringify","ok","result","json","alert","concat","console","log","localStorage","setItem","setsignupbtn","user","errorResult","message","error","className","children","onSubmit","type","value","required","onChange","target","onClick"],"sources":["D:/React/react_app1Copy - Copy - Copy/Frontend/src/Form.js"],"sourcesContent":["import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useState } from 'react';\r\nimport './Form.css';\r\n\r\nexport default function Form(props) {\r\n    const [formType, setFormType] = useState(\"LOGIN\");\r\n    const [name, setName] = useState(''); \r\n    const [email, setEmail] = useState('');\r\n    const [pass, setPass] = useState('');\r\n    const navigate = useNavigate();\r\n\r\n    // Function to handle form submission\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault(); // Prevent default form submission behavior\r\n\r\n        const userData = { \r\n            name: formType=== \"SIGNUP\"? name: undefined,\r\n            email: email, \r\n            password: pass \r\n        };\r\n\r\n        const url = formType===\"SIGNUP\"?\"http://localhost:7600/signup\" : \"http://localhost:7600/login\";\r\n        \r\n    \r\n\r\n        try {\r\n            const response = await fetch(url, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(userData),\r\n            });\r\n\r\n            if (response.ok) {\r\n                const result = await response.json();\r\n                alert(`${formType} successful!`);\r\n                console.log(result)\r\n                \r\n                localStorage.setItem(\"userdata\",JSON.stringify(result))\r\n                // Redirect based on formType or handle response accordingly\r\n                props.setsignupbtn(`Hello ${result.user.name}`)\r\n                navigate(`/dashboard/:${result.user.name}`);\r\n            } else {\r\n                const errorResult = await response.json();\r\n                alert(`${formType} failed: ${errorResult.message}`);\r\n            }\r\n        } catch (error) {\r\n            alert(`${formType} failed: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className='form'>\r\n            <form onSubmit={handleSubmit}>\r\n                <h1>{formType}</h1>\r\n                {formType === \"SIGNUP\" && (\r\n                    <div>\r\n                        NAME:<input type='text' value={name} required onChange={(e) => setName(e.target.value)} />\r\n                    </div>\r\n                )}\r\n                <div>\r\n                    Email:<input type='email' value={email} required onChange={(e) => setEmail(e.target.value)} />\r\n                </div>\r\n                <div>\r\n                    Password:<input type='password' value={pass} required onChange={(e) => setPass(e.target.value)} />\r\n                </div>\r\n                {\r\n                    formType === \"LOGIN\" ? <p>Forgot Pass?</p> : null\r\n                }\r\n                {\r\n                    formType === \"LOGIN\" ? \r\n                    <p onClick={() => setFormType(\"SIGNUP\")}>Don't have an Account? Sign up</p> : \r\n                    <p onClick={() => setFormType(\"LOGIN\")}>Already have an Account? Login</p>\r\n                }\r\n                <button type=\"submit\">{formType}</button> {/* Submit button for form */}\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}