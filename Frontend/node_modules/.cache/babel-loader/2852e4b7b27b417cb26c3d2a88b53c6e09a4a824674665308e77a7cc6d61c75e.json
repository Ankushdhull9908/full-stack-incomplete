{"ast":null,"code":"import React,{useEffect}from'react';import'./Cart.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Cart(props){const navigate=useNavigate();const userdata=localStorage.getItem(\"userdata\");const udata=JSON.parse(userdata);useEffect(()=>{const displayCart=async()=>{try{const response=await fetch(\"http://localhost:7600/displaycart\");const data=await response.json();const FilteredCart=data.filter(item=>{return item.itemOwnerEmail===udata.user.name;});props.setCart(FilteredCart);}catch(error){console.log(error);}};displayCart();},[props.cart],[plusQuantity],[minsQuantity]);// Calculate total cart price by summing up each item's price * quantity\nconst totalCartPrice=props.cart.reduce((accum,item)=>accum+item.itemPrice*item.itemQuantity,0);// Function to decrease the quantity of an item or remove it if quantity is 1\nfunction minsQuantity(index){/*const updatedCart = [...props.cart];\r\n    if (updatedCart[index].quantity > 1) {\r\n      updatedCart[index].quantity -= 1;\r\n    } else {\r\n      updatedCart.splice(index, 1); // Remove the item if quantity is 1\r\n    }\r\n    props.setCart(updatedCart);*/try{const minsQuantity={itemId:props.cart[index].itemId,itemOwnerEmail:udata.user.name};fetch('http://localhost:7600/minsCartQuantity',{method:\"Post\",headers:{'Content-Type':'application/json'},body:JSON.stringify(minsQuantity)});console.log(minsQuantity);}catch(error){console.log(error);}}// Function to increase the quantity of an item\nfunction plusQuantity(index){/* const updatedCart = [...props.cart];\r\n    updatedCart[index].quantity += 1;\r\n    props.setCart(updatedCart);*/try{const plusQuantity={itemId:props.cart[index].itemId,itemOwnerEmail:udata.user.name};fetch('http://localhost:7600/plusCartQuantity',{method:\"Post\",headers:{'Content-Type':'application/json'},body:JSON.stringify(plusQuantity)});console.log(plusQuantity);}catch(error){console.log(error);}}// Function to remove an item from the cart\nfunction removeFromCart(index){/*const updatedCart = [...props.cart];\r\n    updatedCart.splice(index, 1);\r\n    props.setCart(updatedCart);*/try{const datatodelete={itemId:props.cart[index].itemId,itemOwnerEmail:udata.user.name};fetch('http://localhost:7600/deletcartitem',{method:\"Post\",headers:{'Content-Type':'application/json'},body:JSON.stringify(datatodelete)});}catch(error){}}return/*#__PURE__*/_jsx(\"div\",{className:\"Cart\",children:props.cart.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"CART EMPTY\"}):/*#__PURE__*/_jsxs(\"div\",{children:[props.cart.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"item2\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.itemUrl,onClick:()=>navigate(\"/items/\".concat(item.itemId)),alt:\"hi\"}),/*#__PURE__*/_jsx(\"h1\",{children:item.itemName}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" \\u20B9\",item.itemPrice]}),/*#__PURE__*/_jsx(\"p\",{children:item.itemDescription}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Quantity:\"}),\" \",item.itemQuantity]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Price:\"}),\" \\u20B9\",item.itemQuantity*item.itemPrice]}),/*#__PURE__*/_jsx(\"button\",{id:\"first\",onClick:()=>minsQuantity(index),children:\" - \"}),/*#__PURE__*/_jsx(\"button\",{id:\"second\",onClick:()=>plusQuantity(index),children:\" + \"}),/*#__PURE__*/_jsx(\"button\",{id:\"remove\",onClick:()=>removeFromCart(index),children:\"Remove From Cart\"})]},item.itemId)),/*#__PURE__*/_jsx(\"div\",{className:\"cart-total\",children:/*#__PURE__*/_jsxs(\"h2\",{children:[\"Total Cart Price: \\u20B9\",totalCartPrice]})})]})});}","map":{"version":3,"names":["React","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","Cart","props","navigate","userdata","localStorage","getItem","udata","JSON","parse","displayCart","response","fetch","data","json","FilteredCart","filter","item","itemOwnerEmail","user","name","setCart","error","console","log","cart","plusQuantity","minsQuantity","totalCartPrice","reduce","accum","itemPrice","itemQuantity","index","itemId","method","headers","body","stringify","removeFromCart","datatodelete","className","children","length","map","src","itemUrl","onClick","concat","alt","itemName","itemDescription","id"],"sources":["D:/React/react_app1Copy - Copy - Copy/Frontend/src/Cart.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport './Cart.css';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function Cart(props) {\r\n  const navigate = useNavigate();\r\n\r\n  const userdata = localStorage.getItem(\"userdata\");\r\n  const udata = JSON.parse(userdata);\r\n\r\n\r\n  useEffect(()=>{\r\n      const displayCart = async ()=>{\r\n            try{\r\n                 const response = await fetch(\"http://localhost:7600/displaycart\")\r\n                 const data = await response.json();\r\n                 \r\n                   \r\n                  const FilteredCart = data.filter((item)=>{\r\n                    return item.itemOwnerEmail === udata.user.name;\r\n                  })\r\n                  props.setCart(FilteredCart)\r\n                  \r\n            }catch(error){\r\n              console.log(error)\r\n            }\r\n      }\r\n      displayCart()\r\n  },[props.cart],[plusQuantity],[minsQuantity])\r\n\r\n  // Calculate total cart price by summing up each item's price * quantity\r\n  const totalCartPrice = props.cart.reduce((accum, item) => accum + item.itemPrice * item.itemQuantity, 0);\r\n\r\n  // Function to decrease the quantity of an item or remove it if quantity is 1\r\n  function minsQuantity(index) {\r\n    \r\n    /*const updatedCart = [...props.cart];\r\n    if (updatedCart[index].quantity > 1) {\r\n      updatedCart[index].quantity -= 1;\r\n    } else {\r\n      updatedCart.splice(index, 1); // Remove the item if quantity is 1\r\n    }\r\n    props.setCart(updatedCart);*/\r\n    try{\r\n      const minsQuantity = {itemId:props.cart[index].itemId,itemOwnerEmail:udata.user.name}\r\n\r\n      fetch('http://localhost:7600/minsCartQuantity',{\r\n       method:\"Post\",\r\n       headers:{\r\n         'Content-Type':'application/json'\r\n       },\r\n       body:JSON.stringify(minsQuantity)\r\n       \r\n      })\r\n      console.log(minsQuantity)\r\n\r\n      \r\n   }catch(error){\r\n    console.log(error)\r\n   }\r\n  }\r\n\r\n  // Function to increase the quantity of an item\r\n  function plusQuantity(index) {\r\n    \r\n   /* const updatedCart = [...props.cart];\r\n    updatedCart[index].quantity += 1;\r\n    props.setCart(updatedCart);*/\r\n    try{\r\n      const plusQuantity = {itemId:props.cart[index].itemId,itemOwnerEmail:udata.user.name}\r\n\r\n      fetch('http://localhost:7600/plusCartQuantity',{\r\n       method:\"Post\",\r\n       headers:{\r\n         'Content-Type':'application/json'\r\n       },\r\n       body:JSON.stringify(plusQuantity)\r\n       \r\n      })\r\n      console.log(plusQuantity)\r\n\r\n      \r\n   }catch(error){\r\n    console.log(error)\r\n   }\r\n  }\r\n\r\n  \r\n\r\n  // Function to remove an item from the cart\r\n  function removeFromCart(index) {\r\n\r\n    \r\n    /*const updatedCart = [...props.cart];\r\n    updatedCart.splice(index, 1);\r\n    props.setCart(updatedCart);*/\r\n\r\n    try{\r\n       const datatodelete = {itemId:props.cart[index].itemId,itemOwnerEmail:udata.user.name}\r\n\r\n       fetch('http://localhost:7600/deletcartitem',{\r\n        method:\"Post\",\r\n        headers:{\r\n          'Content-Type':'application/json'\r\n        },\r\n        body:JSON.stringify(datatodelete)\r\n       })\r\n       \r\n\r\n       \r\n    }catch(error){\r\n\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='Cart'>\r\n      {props.cart.length === 0 ? (\r\n        <p>CART EMPTY</p>\r\n      ) : (\r\n        <div>\r\n          {props.cart.map((item, index) => (\r\n            <div key={item.itemId} className='item2'>\r\n              <img src={item.itemUrl} onClick={() => navigate(`/items/${item.itemId}`)} alt='hi' />\r\n              <h1>{item.itemName}</h1>\r\n              <p><strong>Price:</strong> ₹{item.itemPrice}</p>\r\n              <p>{item.itemDescription}</p>\r\n              <p><strong>Quantity:</strong> {item.itemQuantity}</p>\r\n              <p><strong>Total Price:</strong> ₹{item.itemQuantity * item.itemPrice}</p>\r\n              <button id=\"first\" onClick={() => minsQuantity(index)}> - </button>\r\n              <button id=\"second\" onClick={() => plusQuantity(index)}> + </button>\r\n              <button id=\"remove\" onClick={() => removeFromCart(index)}>Remove From Cart</button>\r\n            </div>\r\n          ))}\r\n          {/* Display total price */}\r\n          <div className='cart-total'>\r\n            <h2>Total Cart Price: ₹{totalCartPrice}</h2>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}